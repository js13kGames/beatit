function setup(){drawHero(),startHeroAnimation(),drawEnemies(enemiesNumber)}function drawHero(){ctx.clearRect(515,650,100,100),ctx.drawImage(mainHero,heroSliceX,heroSliceY,76,100,heroPositionX,heroPositionY,76,100),heroSliceX+=76,heroPositionX=515,heroSliceX>=mainHero.width&&(heroSliceX=0,heroPositionX=522)}function drawEnemies(e){var o,n;enemies=[];for(var t=0;t<=e;t++)o=getRandomInt(0,canvas.width-15),n=getRandomInt(0,canvas.height-200-15),ctx.fillStyle="#a1a1a1",ctx.fillRect(o,n,15,15)}function startHeroAnimation(){intervalRef||setInterval("drawHero()",500)}function getRandomInt(e,o){return Math.floor(Math.random()*(o-e+1))+e}var canvas=document.getElementById("game");canvas.style.backgroundColor="antiquewhite";var ctx=canvas.getContext("2d"),mainHero=new Image;mainHero.addEventListener("load",setup,!1),mainHero.src="hero_sprite.png";var intervalRef,enemiesNumber=10,heroSliceX=0,heroSliceY=0,heroPositionX=522,heroPositionY=650;