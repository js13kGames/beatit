"use strict";function init(){setup()}function setup(){drawHero(),startHeroAnimation(),drawTextData(),createEnemies(enemiesNumber),canvas.addEventListener("click",makeAction,!1),setInterval("drawEnemy()",50)}function makeAction(e){var o=e.clientX-canvas.offsetLeft,t=e.clientY-canvas.offsetTop;hero.heroPositionX=o,hero.heroPositionY=t,console.log("Clicked x: "+o+" y: "+t)}function drawHero(){ctx.save(),ctx.clearRect(515,650,100,100),ctx.drawImage(mainHero,hero.heroSliceX,hero.heroSliceY,62,100,hero.heroPositionX,hero.heroPositionY,62,100),hero.heroSliceX+=62,hero.heroSliceX>=mainHero.width&&(hero.heroSliceX=0),ctx.restore()}function drawTextData(){if(ctx.fillStyle="#000099",ctx.font="20px monospace",ctx.fillText("Score: "+score,livebar.positionX+130,livebar.positionY+15),ctx.font="20px monospace",ctx.fillText("Live:",livebar.positionX-70,livebar.positionY+15),livebar.live>0)for(var e=1;e<=livebar.live;e++)drawLiveBar(e)}function createEnemy(e,o){var t={speed:1,direction:1,posX:0,posY:0,vMin:1,vMax:10};t.direction=getRandomInt(.5,3),t.speed=getRandomInt(t.vMin,t.vMax),t.posX=getRandomInt(-100,0),t.posX,t.posY=o,enemies.push(t)}function createEnemies(e){for(var o=0;o<e;o++){createEnemy(0,getRandomInt(20,canvas.height-200))}}function drawEnemy(){enemies.forEach(function(e){ctx.clearRect(e.posX-15,e.posY,15,15),ctx.fillStyle="#a1a1a1",ctx.fillRect(e.posX,e.posY,15,15),e.posX>=canvas.width&&(e.posX=0,ctx.clearRect(e.posX-15,e.posY,15,15)),e.posX+=e.speed})}function startHeroAnimation(){intervalRef||setInterval("drawHero() ",300)}function drawLiveBar(e){ctx.fillStyle="#000099",ctx.fillRect(livebar.positionX+e,livebar.positionY,1,20)}function getRandomInt(e,o){return Math.floor(Math.random()*(o-e+1))+e}var canvas=document.getElementById("game");canvas.style.backgroundColor="antiquewhite",canvas.style.border="10px solid #0a0a0a";var ctx=canvas.getContext("2d");ctx.save();var mainHero=new Image;mainHero.src="hero_sprite.png";var intervalRef,score=0,enemiesNumber=6,level=1,hero={heroSliceX:0,heroSliceY:0,heroPositionX:515,heroPositionY:650,speed:10},livebar={live:100,positionX:500,positionY:750},enemies=[];